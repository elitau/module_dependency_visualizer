# ModuleDependencyVisualizer

## Executing

`mix run run.exs "/Users/elitau/Documents/workspace/freigabe/lib/**/*.{ex, exs}"`

## Integration with vs code

Limit graph to nodes connected to current file, Maybe with a [watcher task](https://code.visualstudio.com/docs/editor/tasks#_background-watching-tasks).

### Wishlist

- [ ] Trigger re-rendering of graph with a task.
- [ ] Trigger re-rendering of graph upon file save.
- [ ] Render graph in a window alongside or in a tab of vs code.
- [ ] Click on a node in the graph navigates to the corresponding file in a vs code tab [1].
- [ ] Navigating to a file in vs code highlights the corresponding node in the graph.
- [ ] Show only 7+/-2 nodes visible at once - rest is omitted for easier comprehension.
- [partly] Show only relevant nodes like domain models, services, events, consumers, publishers etc.
- [ ] Navigate the graph with keyboard.

[1] [VS Code interactive graphviz extension](https://github.com/tintinweb/vscode-interactive-graphviz)

## Complete App Graph

Show the whole application in one picture.

## What is this?

I needed a way to generate a graph of module dependencies for Elixir
applications for an upcoming talk I'm giving. This tool generates that
structured data for me so I can investigate and make pretty graphs!

A module dependency, for this purpose, is any module that is `include`d, `use`d,
or has a function called. You can check out the tests for a brief example that
should clear things up.

## Can/Should I use this?

Sure, why not! It's a very narrow library that I'm mostly have as open sourced
so the code is available for inspection by people who see the talk I'm giving
that will feature the data generated by this tool.

## How can I use this?

If you really want to check out the dependency graph for your Elixir
application, go ahead and clone this repo. Then, in `run.exs` you can insert the
path to whatever files you want to analyze in the string there. Then run the app
using `mix run run.exs "path/to/lib/with/glob/**/*.{ex, exs}"`. You'll want to
have Graphviz already installed on your machine if you want to see the pretty
graph.

If you want to do really deep analysis of your graphs, you can use
[Gephi](https://gephi.org/). The `.gv` files output by this program can easily
be loaded into that program.

Also, I've only tested this on OSX, so Linux and Windows may have some
funkiness.

## Is it any good?

No, it most certainly is not. Tests are sparse, documentation is lacking, and
the code itself has a ton of duplication. It is, however, a working application
without any dependencies.

## Allow to filter

The `include` filter keeps only the __origin__ nodes that contains one the given
names. Afterwards the `exclude` filter removes all outgoing dependencies that
contains one the given names.
